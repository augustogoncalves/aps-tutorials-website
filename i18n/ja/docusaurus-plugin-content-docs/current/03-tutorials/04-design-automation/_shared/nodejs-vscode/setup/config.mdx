import VsCodeFolderExplorerImg from "../../_images/vscode-node-folderStructure.webp";

### パッケージのインストール

デフォルトでは、Node.jsプロジェクトは空であるため、npm installを使用していくつかのパッケージをインストールする必要があります。基本的なエクスプレスサーバー、JSON処理用のbody-parser、ファイルアップロード用のmulter、そしてもちろんAPSから始めましょう。



:::caution

一度に 1 つの npm install を実行します。


:::



```bash
npm install express --save
npm install express-formidable --save
npm install multer --save
npm install cookie-session --save
npm install forge-apis --save
npm install autodesk.forge.designautomation --save
npm install body-parser --save
npm install form-data --save
npm install socket.io --save
```

> --save パラメータは、モジュールを依存関係として package.json ファイルに含める必要があることを示します。

最後にpackage.jsonを開き、「scripts」内に「start」: 「node start.js」行を追加します。これで、フォルダには「node_modules」フォルダがあり、「package.json」は次のようになります

```json title=package.json
{
  "name": "designAutomationSample",
  "version": "1.0.0",
  "description": "",
  "main": "start.js",
  "scripts": {
    "start": "node start.js",
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "author": "",
  "license": "MIT",
  "dependencies": {
    "autodesk.forge.designautomation": "^3.0.3",
    "body-parser": "^1.19.0",
    "cookie-session": "^2.0.0",
    "express": "^4.17.1",
    "forge-apis": "^0.9.2",
    "form-data": "^4.0.0",
    "multer": "^1.4.5-lts.1",
    "socket.io": "^4.0.1"
  }
}
```

> バージョン番号 (例: forge-apis 0.9.2) は異なる場合がありますが、このチュートリアルが作成された時点では最新バージョンでした。

### ファイルとフォルダ

新しいフォルダまたはファイルを作成するには、左側の[エクスプローラー]領域を右クリックし、[新しいフォルダー]または[新しいファイル]を選択します。

すべてのサーバーサイドファイル用に「/routes/」フォルダを作成し、すべてのクライアントサイドファイル用に「/wwwroot/」フォルダを作成します。

この時点で、プロジェクトは次のような構造になっているはずです

<img src={VsCodeFolderExplorerImg} style={{ width: 300 }} />

このファイルは、Visual Studio Code にプロジェクトの実行方法を示します。メニューに移動 Run >> Add Configuration...をクリックし、上部に表示される [Select Environment (環境の選択)] ウィンドウで [Node.js (環境の選択)] を選択します。作成された /.vscode/launch.json ファイルに、次のように入力します

```json title=launch.json
{
  // Use IntelliSense to learn about possible attributes.
  // Hover to view descriptions of existing attributes.
  // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
  "version": "0.2.0",
  "configurations": [
    {
      "type": "node",
      "request": "launch",
      "name": "Launch Program",
      "program": "${workspaceFolder}/start.js",
      "env": {
        "APS_CLIENT_ID": "your id here",
        "APS_CLIENT_SECRET": "your secret here"
      }
    }
  ]
}
```



:::note


It's important to define ID & Secret as environment variables so our project can later be deployed online. More on this later, in Deployment.


:::

